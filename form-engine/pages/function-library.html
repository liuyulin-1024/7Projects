<!-- 函数库页面 -->
<div class="page-container">
    <div class="page-header">
        <h1 class="page-title">函数库</h1>
        <div class="breadcrumb">
            <span>平台概览</span>
            <span class="separator">></span>
            <span class="active">函数库</span>
        </div>
    </div>

    <div class="page-content">
        <!-- 搜索筛选区 -->
        <div class="filter-section">
            <div class="filter-row">
                <div class="filter-item">
                    <label>函数名：<span class="note-marker">1</span></label>
                    <input type="text" class="form-input" placeholder="请输入函数名">
                    <div class="field-note">函数名：支持模糊搜索函数名</div>
                </div>
                <div class="filter-item">
                    <label>函数类型：<span class="note-marker">2</span></label>
                    <select class="form-select">
                        <option>全部</option>
                        <option>数学</option>
                        <option>字符串</option>
                        <option>日期</option>
                        <option>数据库</option>
                        <option>条件</option>
                        <option>自定义</option>
                    </select>
                    <div class="field-note">支持多选，枚举值为数据字典的函数类型</div>
                </div>
            </div>
            <div class="filter-actions">
                <button class="btn btn-primary">搜索</button>
                <button class="btn btn-default">重置</button>
            </div>
        </div>

        <!-- 操作按钮 -->
        <div class="action-bar">
            <button class="btn btn-primary" data-action="add-function">新增</button>
            <button class="btn btn-default" disabled>批量删除</button>
        </div>

        <!-- 数据表格 -->
        <div class="table-container">
            <table class="data-table">
                <thead>
                    <tr>
                        <th><input type="checkbox" class="select-all"></th>
                        <th>函数名称</th>
                        <th>函数类型</th>
                        <th>函数说明</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td>SUM</td>
                        <td>数学</td>
                        <td>对数据列求和，例如：SUM(参数)</td>
                        <td>
                            <a href="#" class="link-btn" data-action="view-function">查看</a>
                            <a href="#" class="link-btn">编辑</a>
                            <a href="#" class="link-btn">删除</a>
                        </td>
                    </tr>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td>AVERAGE</td>
                        <td>数学</td>
                        <td>求平均数，例如：AVERAGE(参数1，参数2…)</td>
                        <td>
                            <a href="#" class="link-btn" data-action="view-function">查看</a>
                            <a href="#" class="link-btn">编辑</a>
                            <a href="#" class="link-btn">删除</a>
                        </td>
                    </tr>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td>ABS</td>
                        <td>数学</td>
                        <td>求绝对值，例如：ABS(参数)</td>
                        <td>
                            <a href="#" class="link-btn" data-action="view-function">查看</a>
                            <a href="#" class="link-btn">编辑</a>
                            <a href="#" class="link-btn">删除</a>
                        </td>
                    </tr>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td>成本计算</td>
                        <td>自定义</td>
                        <td>部门成本计算</td>
                        <td>
                            <a href="#" class="link-btn" data-action="view-function">查看</a>
                            <a href="#" class="link-btn">编辑</a>
                            <a href="#" class="link-btn">删除</a>
                        </td>
                    </tr>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td>MAX</td>
                        <td>数学</td>
                        <td>求最大值，例如：MAX(参数1，参数2…)</td>
                        <td>
                            <a href="#" class="link-btn" data-action="view-function">查看</a>
                            <a href="#" class="link-btn">编辑</a>
                            <a href="#" class="link-btn">删除</a>
                        </td>
                    </tr>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td>MIN</td>
                        <td>数学</td>
                        <td>求最小值，例如：MIN(参数1，参数2…)</td>
                        <td>
                            <a href="#" class="link-btn" data-action="view-function">查看</a>
                            <a href="#" class="link-btn">编辑</a>
                            <a href="#" class="link-btn">删除</a>
                        </td>
                    </tr>
                    <tr>
                        <td><input type="checkbox"></td>
                        <td>日均核算</td>
                        <td>自定义</td>
                        <td>部门日均核算</td>
                        <td>
                            <a href="#" class="link-btn" data-action="view-function">查看</a>
                            <a href="#" class="link-btn">编辑</a>
                            <a href="#" class="link-btn">删除</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- 原型说明 -->
        <div class="prototype-notes">
            <h3>原型说明：</h3>
            
            <div class="note-section">
                <h4>页面名称：函数库</h4>
                <p><strong>页面描述：</strong>列表页，管理系统初始化和用户新增的函数</p>
                <p><strong>功能应用：</strong>新建/编辑表单时，数据联动的公式可使用该板块配置的函数</p>
            </div>

            <div class="note-section">
                <h4>列表显示说明 <span class="note-marker">1</span></h4>
                <ul>
                    <li>1.1 无数据时，显示为空，提示语：暂无数据</li>
                    <li>1.2 每页最多显示10条信息，超出翻页</li>
                </ul>
            </div>

            <div class="note-section">
                <h4>列表操作说明 <span class="note-marker">3</span></h4>
                <ul>
                    <li>3.1 查看：点击"查看"浮层显示：查看函数，详见查看函数的弹框说明</li>
                    <li>3.2 编辑：点击"编辑"浮层显示：编辑函数，编辑函数和新增函数的交互一样（默认填充该函数的数据）</li>
                    <li>3.3 删除：点击后弹框提示：删除后建表需手动新建字段，确定删除？ 取消 确定
                        <br>（点击"取消"关闭弹框，点击"确定"逻辑删除所选字段并关闭弹框，删除成功后刷新页面并提示：删除成功）</li>
                </ul>
            </div>

            <div class="note-section">
                <h4>注释说明</h4>
                
                <p><strong><span class="note-marker">1</span> 函数名（筛选）：</strong></p>
                <ul>
                    <li>函数名：支持模糊搜索函数名</li>
                </ul>

                <p><strong><span class="note-marker">2</span> 函数类型（筛选）：</strong></p>
                <ul>
                    <li>支持多选，枚举值为数据字典的函数类型</li>
                </ul>

                <p><strong><span class="note-marker">3</span> 操作说明：</strong></p>
                <ul>
                    <li>参见上方列表操作说明</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- 函数查看/编辑弹窗 -->
<div class="modal" id="functionModal" style="display: none;">
    <div class="modal-content modal-lg">
        <div class="modal-header">
            <h3 id="functionModalTitle">新增函数</h3>
            <button class="modal-close">&times;</button>
        </div>
        <div class="modal-body">
            <div class="code-editor-container">
                <h4>自定义函数</h4>
                <pre class="code-editor"><code>/*
* TODO
* 请在此处编写函数说明，此说明将在函数列表中显示
*/
function 函数名(函数参数...) {
    /*
    * TODO
    * 请在此处编写javascript代码
    */
}</code></pre>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-default" data-dismiss="modal">取消</button>
            <button class="btn btn-primary">保存</button>
        </div>
    </div>
</div>

