<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>待办列表 - 待办中心</title>
    <link rel="stylesheet" href="css/pc.css">
</head>
<body>
    <!-- 全局导航栏 -->
    <nav class="top-navbar">
        <div class="nav-left">
            <div class="logo">
                <img src="../assets/logo.png" alt="中国华夏" class="logo-img">
                <span class="site-name">一站式门户</span>
            </div>
        </div>
        <div class="nav-right">
            <div class="user-info">
                <span class="username">用户名</span>
                <img src="../assets/avatar.png" alt="用户头像" class="avatar">
            </div>
        </div>
    </nav>

    <div class="main-container">
        <!-- 左侧菜单 -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="workspace-title">
                    <span class="icon">🏠</span>
                    <span>工作台</span>
                </div>
            </div>
            <ul class="menu-list">
                <li class="menu-item">
                    <span class="menu-icon">💬</span>
                    <span class="menu-text">即时通讯</span>
                </li>
                <li class="menu-item">
                    <span class="menu-icon">🤖</span>
                    <span class="menu-text">AI助理</span>
                </li>
                <li class="menu-item">
                    <span class="menu-icon">📊</span>
                    <span class="menu-text">多维表格</span>
                </li>
                <li class="menu-item">
                    <span class="menu-icon">📦</span>
                    <span class="menu-text">应用管理</span>
                </li>
                <li class="menu-item">
                    <span class="menu-icon">📁</span>
                    <span class="menu-text">档案管理系统</span>
                </li>
                <li class="menu-item">
                    <span class="menu-icon">📄</span>
                    <span class="menu-text">文档管理系统</span>
                </li>
            </ul>
        </aside>

        <!-- 右侧内容区 -->
        <div class="content-wrapper">
            <!-- 面包屑导航 -->
            <div class="breadcrumb">
                <span class="breadcrumb-item clickable" onclick="location.href='index.html'">工作台</span>
                <span class="breadcrumb-separator">></span>
                <span class="breadcrumb-item">待办中心</span>
            </div>

            <!-- 类型标签切换 -->
            <div class="type-tabs">
                <button class="type-tab active" onclick="switchTab('todo')">待办</button>
                <button class="type-tab" onclick="location.href='list-done.html'">已办</button>
                <button class="type-tab" onclick="location.href='list-sent.html'">已发</button>
                <button class="type-tab" onclick="location.href='list-finished.html'">办结</button>
            </div>

            <h2 class="page-title">待办列表</h2>

            <!-- 
                注释：批量处理功能
                - 仅支持批量处理OA工作流程
            -->
            <div class="table-toolbar">
                <button class="batch-btn" onclick="batchProcess()">批量处理</button>
            </div>

            <!-- 
                注释：待办列表字段
                - 字段包括：工单号、标题、发起人、发起人部门、发起时间、到达时间、工单来源、紧急程度、操作
                - 其中发起人通过搜索、其他通过筛选快速检索
            -->
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th width="50">
                                <input type="checkbox" id="selectAll" onchange="toggleSelectAll(this)">
                            </th>
                            <th width="150">
                                工单号
                                <span class="sort-icon" onclick="sortTable('orderNo')">⇅</span>
                            </th>
                            <th>
                                标题
                                <span class="filter-icon" onclick="showFilter('title')">⚙</span>
                            </th>
                            <th width="100">
                                发起人
                                <span class="search-icon" onclick="showSearch('initiator')">🔍</span>
                            </th>
                            <th width="120">
                                发起人部门
                                <span class="filter-icon" onclick="showFilter('department')">⚙</span>
                            </th>
                            <th width="160">
                                发起时间
                                <span class="filter-icon" onclick="showFilter('startTime')">⚙</span>
                            </th>
                            <th width="160">
                                到达时间
                                <span class="filter-icon" onclick="showFilter('arriveTime')">⚙</span>
                            </th>
                            <th width="100">
                                工单来源
                                <span class="filter-icon" onclick="showFilter('source')">⚙</span>
                            </th>
                            <th width="100">
                                紧急程度
                                <span class="filter-icon" onclick="showFilter('priority')">⚙</span>
                            </th>
                            <th width="100">操作</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- 
                            注释：稍后办工单
                            - 对于当下无法做出审批决定的，可以点击【稍后办】
                            - 该工单的紧急程度自动标记为"稍后办"，且该工单自动置顶作为最高优先级
                            - 若有多个稍后办，则按标记稍后办的时间降序排序
                            - 若该工单本身就是紧急状态，两个状态均需展示
                        -->
                        <tr class="table-row" onclick="goToDetail('WO20250816001', 'todo')">
                            <td><input type="checkbox" class="row-checkbox" onclick="event.stopPropagation()"></td>
                            <td class="order-no">WO20250816001</td>
                            <td class="title-cell">2026年年度预算申请</td>
                            <td>周明俊</td>
                            <td>财务部</td>
                            <td>2023-08-16 14:25:36</td>
                            <td>2023-08-16 14:25:36</td>
                            <td>财务</td>
                            <td>
                                <span class="priority-tag later">稍后办</span>
                            </td>
                            <td>
                                <button class="action-btn process-btn" onclick="event.stopPropagation(); goToDetail('WO20250816001', 'todo')">处理</button>
                            </td>
                        </tr>

                        <tr class="table-row" onclick="goToDetail('WO20250816002', 'todo')">
                            <td><input type="checkbox" class="row-checkbox" onclick="event.stopPropagation()"></td>
                            <td class="order-no">WO20250816002</td>
                            <td class="title-cell">AI智能客服系统项目立项审批</td>
                            <td>张宁</td>
                            <td>工程部</td>
                            <td>2023-08-16 14:25:36</td>
                            <td>2023-08-16 14:25:36</td>
                            <td>PMS</td>
                            <td>
                                <span class="priority-tag urgent">紧急</span>
                            </td>
                            <td>
                                <button class="action-btn process-btn" onclick="event.stopPropagation(); goToDetail('WO20250816002', 'todo')">处理</button>
                            </td>
                        </tr>

                        <tr class="table-row" onclick="goToDetail('WO20250816003', 'todo')">
                            <td><input type="checkbox" class="row-checkbox" onclick="event.stopPropagation()"></td>
                            <td class="order-no">WO20250816003</td>
                            <td class="title-cell">新员工入职审批</td>
                            <td>陈鸿飞</td>
                            <td>人事部</td>
                            <td>2023-08-16 14:25:36</td>
                            <td>2023-08-16 14:25:36</td>
                            <td>OA</td>
                            <td>
                                <span class="priority-tag normal">-</span>
                            </td>
                            <td>
                                <button class="action-btn process-btn" onclick="event.stopPropagation(); goToDetail('WO20250816003', 'todo')">处理</button>
                            </td>
                        </tr>

                        <tr class="table-row" onclick="goToDetail('WO20250816004', 'todo')">
                            <td><input type="checkbox" class="row-checkbox" onclick="event.stopPropagation()"></td>
                            <td class="order-no">WO20250816004</td>
                            <td class="title-cell">财务部软件采购合同审批</td>
                            <td>刘明涛</td>
                            <td>人事部</td>
                            <td>2023-08-16 14:25:36</td>
                            <td>2023-08-16 14:25:36</td>
                            <td>OA</td>
                            <td>
                                <span class="priority-tag normal">-</span>
                            </td>
                            <td>
                                <button class="action-btn process-btn" onclick="event.stopPropagation(); goToDetail('WO20250816004', 'todo')">处理</button>
                            </td>
                        </tr>

                        <tr class="table-row" onclick="goToDetail('WO20250816005', 'todo')">
                            <td><input type="checkbox" class="row-checkbox" onclick="event.stopPropagation()"></td>
                            <td class="order-no">WO20250816005</td>
                            <td class="title-cell">工程部自动化项目事宜讨论</td>
                            <td>史进</td>
                            <td>工程部</td>
                            <td>2023-08-16 14:25:36</td>
                            <td>2023-08-16 14:25:36</td>
                            <td>PMS</td>
                            <td>
                                <span class="priority-tag normal">-</span>
                            </td>
                            <td>
                                <button class="action-btn process-btn" onclick="event.stopPropagation(); goToDetail('WO20250816005', 'todo')">处理</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- 分页 -->
            <div class="pagination">
                <button class="page-btn">上一页</button>
                <span class="page-number active">1</span>
                <button class="page-btn">下一页</button>
            </div>
        </div>
    </div>

    <script src="js/pc.js"></script>
    <script src="js/list.js"></script>
</body>
</html>

